var m=(e,n,t)=>new Promise((c,d)=>{var r=a=>{try{s(t.next(a))}catch(l){d(l)}},o=a=>{try{s(t.throw(a))}catch(l){d(l)}},s=a=>a.done?c(a.value):Promise.resolve(a.value).then(r,o);s((t=t.apply(e,n)).next())});import{initModal as f,openModal as C}from"./modal.js";import{initSearch as v}from"./search.js";const w=400,L=["jpg","jpeg","png","gif","webp"],y=["mp4","webm"],S={rootMargin:"400px 0px"},u=e=>e.split(".").pop().toLowerCase(),O=e=>L.includes(u(e)),b=e=>y.includes(u(e));export let activeCategory="semantic-colors";export function initMainPage(){f(),v(),x(),B()}function g(e){const n=document.querySelectorAll(".category"),t=document.querySelectorAll(".category-button");n.forEach(c=>{c.classList.remove("active")}),document.getElementById(e).classList.add("active"),t.forEach(c=>{c.classList.remove("active"),c.dataset.category===e&&c.classList.add("active")}),document.dispatchEvent(new CustomEvent("categoryChange",{detail:{category:e}})),activeCategory=e}function x(){g(activeCategory),document.querySelectorAll(".category-button").forEach(n=>{n.addEventListener("click",()=>{g(n.dataset.category)})})}function B(){return m(this,null,function*(){try{const e=yield fetch("data.json",{cache:"default"});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=yield e.json();E(n.semanticColors,"semantic-colors"),E(n.rawColors,"raw-colors")}catch(e){console.error("Error while loading JSON data:",e)}})}function h(e){const n=e.querySelector(".media"),t=e.querySelector(".description"),c=e.querySelector("h3"),d=e.querySelector(".id");function r(){const s=e.scrollHeight>w;e.classList.toggle("has-hidden-content",s)}r();const o=new ResizeObserver(r);o.observe(n),o.observe(t),o.observe(c),o.observe(d)}function E(e,n){const t=document.getElementById(n);if(!t){console.warn(`Container with id "${n}" not found. Skipping rendering.`);return}t.innerHTML="";const c=[...e].sort((r,o)=>{const s=r.title.replace(/(\d+)/,(l,p)=>String(p).padStart(10,"0")),a=o.title.replace(/(\d+)/,(l,p)=>String(p).padStart(10,"0"));return s.localeCompare(a)}),d=new IntersectionObserver(r=>{r.forEach(o=>{if(o.isIntersecting){const s=o.target;s.src=s.dataset.src,s.tagName==="VIDEO"&&s.load(),d.unobserve(s)}})},S);c.forEach(r=>{const o=_(r,d);t.appendChild(o),h(o)})}function _(e,n){const t=document.createElement("div");t.classList.add("bloc"),t.dataset.title=e.title.toLowerCase(),t.dataset.description=e.description.toLowerCase();const c=document.createElement("h3");c.textContent=e.title,t.appendChild(c);const d=document.createElement("p");d.classList.add("description"),d.textContent=e.description,t.appendChild(d);const r=document.createElement("div");r.classList.add("media"),e.images.forEach(p=>{if(O(p)){const i=document.createElement("img");i.dataset.src=p,i.alt=e.title,i.loading="lazy",r.appendChild(i),n.observe(i)}else if(b(p)){const i=document.createElement("video");i.dataset.src=p,i.controls=!0,i.preload="none",i.setAttribute("playsinline","true"),r.appendChild(i),n.observe(i)}}),t.appendChild(r);const o=document.createElement("p");o.classList.add("id"),o.textContent=`ID: ${e.id}`,t.appendChild(o);const s=document.createElement("div");s.classList.add("bottom-banner"),t.appendChild(s);const a=document.createElement("button");a.classList.add("toggle-button");const l=document.createElement("span");return l.classList.add("material-symbols-rounded"),l.textContent="keyboard_arrow_down",a.appendChild(l),a.appendChild(document.createTextNode(" More")),a.onclick=()=>M(t,a),t.appendChild(a),t}function I(e,n){e.innerHTML=`
        <span class="material-symbols-rounded">
            ${n?"keyboard_arrow_up":"keyboard_arrow_down"}
        </span>
        ${n?" Less":" More"}`}function M(e,n){const t=e.classList.contains("expanded");e.classList.toggle("expanded"),t?h(e):e.classList.remove("has-hidden-content"),I(n,e.classList.contains("expanded"))}document.addEventListener("click",e=>{e.target.matches(".media img")&&C(e.target)});
